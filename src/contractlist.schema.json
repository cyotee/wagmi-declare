{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "https://indexedex.app/schemas/sepolia-vault.contractlist.schema.json",
    "title": "Contract List",
    "type": "array",
    "items": {
        "type": "object",
        "required": [
            "chainId",
            "hookName",
            "name"
        ],
        "properties": {
            "chainId": {
                "type": "integer"
            },
            "hookName": {
                "type": "string"
            },
            "name": {
                "type": "string"
            },
            "functions": {
                "type": "array",
                "items": {
                    "type": "object",
                    "required": [],
                    "properties": {
                        "simulate": {
                            "type": "boolean"
                        },
                        "resultStrategies": {
                            "type": "array",
                            "items": {
                                "$ref": "#/$defs/resultStrategy"
                            }
                        },
                        "arguments": {
                            "type": "array",
                            "items": {
                                "$ref": "#/$defs/argument"
                            }
                        }
                    },
                    "patternProperties": {
                        "^(?!simulate$|resultStrategies$|arguments$)[a-zA-Z0-9]+$": {
                            "type": "string",
                            "description": "The function name as the key, mapping to its display label. Exactly one such key-value pair per function object."
                        }
                    },
                    "additionalProperties": false,
                    "minProperties": 1,
                    "maxProperties": 4,
                    "description": "Each object contains exactly one function name key (matching the pattern) mapping to a display label string, plus optional simulate, resultStrategies, and arguments."
                }
            }
        }
    },
    "$defs": {
        "argument": {
            "type": "object",
            "required": [
                "name",
                "type",
                "description"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "description": "Solidity type: address, address[], uint8, uint256, uint256[], bool, string, tuple, tuple[]",
                    "enum": [
                        "address",
                        "address[]",
                        "uint8",
                        "uint256",
                        "uint256[]",
                        "bool",
                        "string",
                        "tuple",
                        "tuple[]"
                    ]
                },
                "description": {
                    "type": "string"
                },
                "optional": {
                    "type": "boolean"
                },
                "default": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "number"
                        },
                        {
                            "type": "boolean"
                        },
                        {
                            "type": "array"
                        },
                        {
                            "type": "null"
                        },
                        {
                            "type": "object",
                            "properties": {
                                "source": {
                                    "type": "string",
                                    "enum": ["connectedWallet", "field", "contractCall", "env"],
                                    "description": "Source type for dynamic default value."
                                },
                                "field": {
                                    "type": "string",
                                    "description": "Field name to copy value from (when source is 'field')."
                                },
                                "envVar": {
                                    "type": "string",
                                    "description": "Environment variable name (when source is 'env')."
                                },
                                "abiCall": {
                                    "$ref": "#/$defs/ui/properties/abiCall",
                                    "description": "Contract call to get default value (when source is 'contractCall')."
                                }
                            },
                            "required": ["source"],
                            "description": "Dynamic default value from external source."
                        }
                    ],
                    "description": "Default value - can be static or dynamic from sources like connected wallet, other fields, or contract calls."
                },
                "minItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "maxItems": {
                    "type": "integer",
                    "minimum": 0
                },
                "components": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/argumentComponent"
                    },
                    "description": "Required when type is tuple or tuple[]. Avoid deep nesting for simplicity."
                },
                "ui": {
                    "$ref": "#/$defs/ui"
                }
            },
            "if": {
                "properties": {
                    "type": {
                        "enum": [
                            "tuple",
                            "tuple[]"
                        ]
                    }
                }
            },
            "then": {
                "required": [
                    "components"
                ]
            },
            "examples": [
                {
                    "name": "account",
                    "type": "address",
                    "description": "The account to check balance for",
                    "ui": {
                        "widget": "address"
                    }
                },
                {
                    "name": "amounts",
                    "type": "uint256[]",
                    "description": "Array of amounts",
                    "minItems": 1,
                    "maxItems": 10
                }
            ]
        },
        "resultStrategy": {
            "type": "object",
            "required": [
                "type"
            ],
            "properties": {
                "type": {
                    "enum": [
                        "simulate",
                        "event",
                        "read"
                    ]
                },
                "label": {
                    "type": "string"
                },
                "format": {
                    "enum": [
                        "address",
                        "link",
                        "hex",
                        "number"
                    ]
                },
                "abiPath": {
                    "type": "string",
                    "description": "Path to the ABI file or reference (e.g., 'abis/ERC20.json')."
                },
                "inlineAbi": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "properties": {
                            "type": {
                                "type": "string"
                            },
                            "name": {
                                "type": "string"
                            },
                            "inputs": {
                                "type": "array"
                            },
                            "outputs": {
                                "type": "array"
                            },
                            "stateMutability": {
                                "type": "string"
                            }
                        }
                    },
                    "description": "Inline ABI array conforming to standard ABI item structure."
                },
                "contractAddress": {
                    "type": "string"
                },
                "hook": {
                    "type": "object",
                    "required": [
                        "name"
                    ],
                    "properties": {
                        "name": {
                            "type": "string"
                        },
                        "argsFrom": {
                            "type": "array",
                            "items": {
                                "$ref": "#/$defs/argSource"
                            }
                        }
                    }
                },
                "name": {
                    "type": "string",
                    "description": "Event or read function name (required when not using hook)."
                },
                "arg": {
                    "oneOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "integer"
                        }
                    ]
                },
                "function": {
                    "type": "string"
                },
                "argsFrom": {
                    "type": "array",
                    "items": {
                        "$ref": "#/$defs/argSource"
                    }
                },
                "valueField": {
                    "type": "string"
                }
            },
            "if": {
                "properties": {
                    "type": {
                        "const": "read"
                    }
                }
            },
            "then": {
                "anyOf": [
                    {
                        "required": [
                            "name"
                        ]
                    },
                    {
                        "required": [
                            "hook"
                        ]
                    }
                ]
            },
            "else": {
                "if": {
                    "properties": {
                        "type": {
                            "const": "event"
                        }
                    }
                },
                "then": {
                    "anyOf": [
                        {
                            "required": [
                                "name"
                            ]
                        },
                        {
                            "required": [
                                "hook"
                            ]
                        }
                    ]
                }
            },
            "if": {
                "not": {
                    "required": [
                        "hook"
                    ]
                }
            },
            "then": {
                "oneOf": [
                    {
                        "required": [
                            "abiPath"
                        ]
                    },
                    {
                        "required": [
                            "inlineAbi"
                        ]
                    }
                ]
            },
            "examples": [
                {
                    "type": "read",
                    "name": "balanceOf",
                    "abiPath": "abis/ERC20.json",
                    "argsFrom": [
                        {
                            "literal": "0x123..."
                        }
                    ]
                }
            ]
        },
        "argumentComponent": {
            "type": "object",
            "required": [
                "name",
                "type",
                "description"
            ],
            "properties": {
                "name": {
                    "type": "string"
                },
                "type": {
                    "type": "string",
                    "description": "Solidity type (no nested tuple[] recommended here)",
                    "enum": [
                        "address",
                        "uint8",
                        "uint256",
                        "bool",
                        "string"
                    ]
                },
                "description": {
                    "type": "string"
                },
                "optional": {
                    "type": "boolean"
                },
                "default": {
                    "anyOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "number"
                        },
                        {
                            "type": "boolean"
                        },
                        {
                            "type": "null"
                        }
                    ]
                },
                "ui": {
                    "$ref": "#/$defs/ui"
                }
            },
            "examples": [
                {
                    "name": "token",
                    "type": "address",
                    "description": "Token address in tuple"
                }
            ]
        },
        "ui": {
            "type": "object",
            "properties": {
                "widget": {
                    "enum": [
                        "address",
                        "text",
                        "select",
                        "multiselect",
                        "checkbox",
                        "radio",
                        "slider",
                        "tokenAmount",
                        "datetime"
                    ],
                    "description": "Widget type for rendering the input field."
                },
                "tokenAmountConfig": {
                    "type": "object",
                    "properties": {
                        "tokenFrom": {
                            "type": "string",
                            "description": "Field name containing the token address (for decimals lookup)."
                        },
                        "showMaxButton": {
                            "type": "boolean",
                            "description": "Show a MAX button to set maximum available balance."
                        },
                        "showUsdValue": {
                            "type": "boolean",
                            "description": "Show USD equivalent value."
                        },
                        "showBalance": {
                            "type": "boolean",
                            "description": "Show user's token balance."
                        }
                    },
                    "description": "Configuration for tokenAmount widget."
                },
                "datetimeConfig": {
                    "type": "object",
                    "properties": {
                        "format": {
                            "type": "string",
                            "enum": ["timestamp", "relative", "datetime", "date", "time"],
                            "description": "Display format for the datetime value."
                        },
                        "minDate": {
                            "type": "string",
                            "enum": ["now", "custom"],
                            "description": "Minimum selectable date."
                        },
                        "maxDate": {
                            "type": "string",
                            "description": "Maximum selectable date (ISO string or relative like '+30d')."
                        },
                        "defaultOffset": {
                            "type": "string",
                            "description": "Default offset from now (e.g., '+7d', '+1h', '+30m')."
                        }
                    },
                    "description": "Configuration for datetime widget."
                },
                "allowManual": {
                    "type": "boolean"
                },
                "placeholder": {
                    "type": "string",
                    "description": "Placeholder text shown in empty input fields."
                },
                "helpText": {
                    "type": "string",
                    "description": "Detailed help text shown in tooltip or expandable section."
                },
                "helpLink": {
                    "type": "string",
                    "format": "uri",
                    "description": "URL to external documentation for this field."
                },
                "source": {
                    "enum": [
                        "tokenlist",
                        "contractlist",
                        "static",
                        "contractFunction"
                    ]
                },
                "sourcePath": {
                    "type": "string",
                    "description": "Path within the source data (e.g., 'tokens' in a tokenlist JSON)."
                },
                "valueField": {
                    "type": "string"
                },
                "labelField": {
                    "oneOf": [
                        {
                            "type": "string"
                        },
                        {
                            "type": "object",
                            "required": [
                                "tokenlistPath",
                                "labelField"
                            ],
                            "properties": {
                                "tokenlistPath": {
                                    "type": "string"
                                },
                                "labelField": {
                                    "type": "string"
                                }
                            }
                        }
                    ]
                },
                "filters": {
                    "type": "object",
                    "additionalProperties": true
                },
                "options": {
                    "type": "array",
                    "items": {
                        "type": "object",
                        "required": [
                            "value",
                            "label"
                        ],
                        "properties": {
                            "value": {},
                            "label": {
                                "type": "string"
                            }
                        }
                    }
                },
                "dependsOn": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    },
                    "description": "Argument names this UI depends on (e.g., for dynamic loading). Ensure no cycles."
                },
                "visibleWhen": {
                    "type": "object",
                    "properties": {
                        "field": {
                            "type": "string",
                            "description": "Name of the field to check."
                        },
                        "condition": {
                            "type": "string",
                            "enum": ["equals", "notEquals", "in", "notIn", "exists", "notExists"],
                            "description": "Condition type for visibility check."
                        },
                        "value": {
                            "description": "Value to compare against (not used for exists/notExists)."
                        },
                        "values": {
                            "type": "array",
                            "description": "Array of values for in/notIn conditions."
                        }
                    },
                    "required": ["field", "condition"],
                    "description": "Conditional visibility based on another field's value."
                },
                "hook": {
                    "type": "object",
                    "required": [
                        "name"
                    ],
                    "properties": {
                        "name": {
                            "type": "string"
                        },
                        "argsFrom": {
                            "type": "array",
                            "items": {
                                "$ref": "#/$defs/argSource"
                            }
                        }
                    }
                },
                "abiCall": {
                    "type": "object",
                    "required": [
                        "function"
                    ],
                    "properties": {
                        "abiPath": {
                            "type": "string"
                        },
                        "inlineAbi": {
                            "type": "array",
                            "items": {
                                "type": "object"
                            }
                        },
                        "function": {
                            "type": "string"
                        },
                        "argsFrom": {
                            "type": "array",
                            "items": {
                                "$ref": "#/$defs/argSource"
                            }
                        },
                        "contractFrom": {
                            "$ref": "#/$defs/argSource"
                        }
                    },
                    "oneOf": [
                        {
                            "required": [
                                "abiPath"
                            ]
                        },
                        {
                            "required": [
                                "inlineAbi"
                            ]
                        }
                    ]
                },
                "array": {
                    "type": "object",
                    "properties": {
                        "addLabel": {
                            "type": "string"
                        },
                        "removeLabel": {
                            "type": "string"
                        },
                        "itemLabelField": {
                            "type": "string"
                        }
                    }
                },
                "validation": {
                    "type": "object",
                    "properties": {
                        "regex": {
                            "type": "string"
                        },
                        "errorMessage": {
                            "type": "string"
                        },
                        "min": {
                            "type": "number",
                            "description": "Minimum allowed value for numeric inputs."
                        },
                        "max": {
                            "type": "number",
                            "description": "Maximum allowed value for numeric inputs."
                        },
                        "step": {
                            "type": "number",
                            "description": "Step increment for numeric inputs (e.g., 1 for integers, 0.01 for decimals)."
                        }
                    }
                },
                "display": {
                    "type": "object",
                    "properties": {
                        "unit": {
                            "type": "string",
                            "enum": ["wei", "gwei", "ether", "bps", "percent", "seconds", "minutes", "hours", "days"],
                            "description": "Unit type for display conversion."
                        },
                        "unitLabel": {
                            "type": "string",
                            "description": "Custom label for the unit (e.g., 'basis points')."
                        },
                        "decimals": {
                            "type": "integer",
                            "minimum": 0,
                            "maximum": 18,
                            "description": "Number of decimal places to display."
                        }
                    }
                }
            },
            "if": {
                "properties": {
                    "widget": {
                        "enum": [
                            "select",
                            "multiselect"
                        ]
                    }
                }
            },
            "then": {
                "anyOf": [
                    {
                        "required": [
                            "source"
                        ]
                    },
                    {
                        "required": [
                            "options"
                        ]
                    }
                ]
            },
            "examples": [
                {
                    "widget": "select",
                    "source": "tokenlist",
                    "sourcePath": "tokens",
                    "valueField": "address",
                    "labelField": "symbol"
                }
            ]
        },
        "argSource": {
            "oneOf": [
                {
                    "type": "string",
                    "description": "Name of another argument whose current value will be passed as an argument."
                },
                {
                    "type": "object",
                    "required": [
                        "literal"
                    ],
                    "properties": {
                        "literal": {
                            "anyOf": [
                                {
                                    "type": "string"
                                },
                                {
                                    "type": "number"
                                },
                                {
                                    "type": "boolean"
                                },
                                {
                                    "type": "array"
                                }
                            ]
                        }
                    }
                }
            ],
            "examples": [
                "account",
                {
                    "literal": "0x1234567890123456789012345678901234567890"
                }
            ]
        }
    }
}