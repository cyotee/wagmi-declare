[[types]]
= TypeScript Types

This section documents all TypeScript types exported by `@daosys/wagmi-declare`.

== Core Types

=== Address

[source,typescript]
----
type Address = `0x${string}`;
----

Ethereum address type with template literal validation.

=== ArgSource

[source,typescript]
----
type ArgSource = string | { literal: any };
----

Specifies where to get a value:
- `string` - Field name to read from
- `{ literal: value }` - Static value

== Factory Types

=== ContractListFactory

[source,typescript]
----
type ContractListFactory = {
    chainId: number;
    hookName: string;
    name: string;
    functions: ContractListFunctionEntry[];
};
----

Top-level factory definition.

=== ContractListFunctionEntry

[source,typescript]
----
type ContractListFunctionEntry = {
    simulate?: boolean;
    resultStrategies?: ResultStrategy[];
    arguments?: ContractListArgument[] | ArgumentGroup[];
    wizard?: WizardConfig;
    preview?: PreviewConfig;
    gasEstimation?: GasEstimationConfig;
} & Record<string, string>; // functionName: label
----

Function definition with optional features.

== Argument Types

=== ContractListArgument

[source,typescript]
----
type ContractListArgument = ContractListArgComponent & {
    minItems?: number;
    maxItems?: number;
    components?: ContractListArgComponent[];
    computed?: boolean;
    computeFrom?: ComputeSource;
};
----

Full argument definition.

=== ContractListArgComponent

[source,typescript]
----
type ContractListArgComponent = {
    name: string;
    type: 'address' | 'address[]' | 'uint8' | 'uint256' | 'uint256[]' | 'bool' | 'string';
    description: string;
    optional?: boolean;
    default?: string | number | boolean | any[] | null | DynamicDefault;
    ui?: ContractListArgUI;
};
----

Base component for arguments and tuple fields.

=== ArgumentGroup

[source,typescript]
----
type ArgumentGroup = {
    group: string;
    collapsed?: boolean;
    description?: string;
    fields: ContractListArgument[];
};
----

Group of related arguments.

== UI Configuration Types

=== ContractListArgUI

[source,typescript]
----
type ContractListArgUI = {
    widget?: 'address' | 'text' | 'select' | 'multiselect' | 'checkbox' | 'radio' | 'slider' | 'tokenAmount' | 'datetime';
    tokenAmountConfig?: TokenAmountConfig;
    datetimeConfig?: DatetimeConfig;
    allowManual?: boolean;
    placeholder?: string;
    helpText?: string;
    helpLink?: string;
    source?: 'tokenlist' | 'contractlist' | 'static' | 'contractFunction';
    sourcePath?: string;
    valueField?: string;
    labelField?: string | { tokenlistPath: string; labelField: string };
    filters?: Record<string, unknown>;
    options?: Array<{ value: any; label: string }>;
    dependsOn?: string[];
    visibleWhen?: {
        field: string;
        condition: 'equals' | 'notEquals' | 'in' | 'notIn' | 'exists' | 'notExists';
        value?: any;
        values?: any[];
    };
    hook?: { name: string; argsFrom?: ArgSource[] };
    abiCall?: {
        abiPath?: string;
        inlineAbi?: any[];
        function: string;
        argsFrom?: ArgSource[];
        contractFrom?: ArgSource;
    };
    array?: { addLabel?: string; removeLabel?: string; itemLabelField?: string };
    validation?: {
        regex?: string;
        errorMessage?: string;
        min?: number;
        max?: number;
        step?: number;
        onChain?: OnChainValidation;
    };
    display?: {
        unit?: 'wei' | 'gwei' | 'ether' | 'bps' | 'percent' | 'seconds' | 'minutes' | 'hours' | 'days';
        unitLabel?: string;
        decimals?: number;
    };
    layout?: LayoutHints;
    i18n?: I18nConfig;
    addressBook?: boolean;
};
----

Complete UI configuration for an argument.

=== TokenAmountConfig

[source,typescript]
----
type TokenAmountConfig = {
    tokenFrom?: string;
    showMaxButton?: boolean;
    showUsdValue?: boolean;
    showBalance?: boolean;
};
----

Configuration for token amount widget.

=== DatetimeConfig

[source,typescript]
----
type DatetimeConfig = {
    format?: 'timestamp' | 'relative' | 'datetime' | 'date' | 'time';
    minDate?: 'now' | 'custom';
    maxDate?: string;
    defaultOffset?: string;
};
----

Configuration for datetime widget.

== Dynamic Default Types

=== DynamicDefault

[source,typescript]
----
type DynamicDefault = {
    source: 'connectedWallet' | 'field' | 'contractCall' | 'env';
    field?: string;
    envVar?: string;
    abiCall?: ContractListArgUI['abiCall'];
};
----

Dynamic default value source.

== Validation Types

=== OnChainValidation

[source,typescript]
----
type OnChainValidation = {
    abiCall: ContractListArgUI['abiCall'];
    condition: 'exists' | 'notExists' | 'eq' | 'neq' | 'gt' | 'gte' | 'lt' | 'lte' | 'in' | 'notIn';
    value?: any;
    compareToField?: string;
    values?: any[];
    errorMessage?: string;
    debounceMs?: number;
};
----

On-chain validation configuration.

== Computed Field Types

=== ComputeSource

[source,typescript]
----
type ComputeSource = {
    type: 'abiCall' | 'expression' | 'field';
    abiCall?: ContractListArgUI['abiCall'];
    expression?: string;
    field?: string;
    transform?: 'none' | 'formatUnits' | 'parseUnits' | 'toHex' | 'toBigInt';
    transformDecimals?: number;
};
----

Source for computed field values.

== Wizard Types

=== WizardConfig

[source,typescript]
----
type WizardConfig = {
    steps: WizardStep[];
    allowSkip?: boolean;
    showProgressBar?: boolean;
    showStepNumbers?: boolean;
};
----

Multi-step wizard configuration.

=== WizardStep

[source,typescript]
----
type WizardStep = {
    id: string;
    title: string;
    description?: string;
    fields?: string[];
    groups?: string[];
    validationMessage?: string;
};
----

Individual wizard step.

== Preview and Gas Types

=== PreviewConfig

[source,typescript]
----
type PreviewConfig = {
    enabled?: boolean;
    showTokenTransfers?: boolean;
    showStateChanges?: boolean;
    showApprovals?: boolean;
    simulateOnChain?: boolean;
    warningThresholds?: {
        slippagePercent?: number;
        priceImpactPercent?: number;
    };
};
----

Transaction preview configuration.

=== GasEstimationConfig

[source,typescript]
----
type GasEstimationConfig = {
    enabled?: boolean;
    showInNativeCurrency?: boolean;
    showInUsd?: boolean;
    showGasLimit?: boolean;
    refreshIntervalMs?: number;
    includeApprovalGas?: boolean;
};
----

Gas estimation display configuration.

== Layout Types

=== LayoutHints

[source,typescript]
----
type LayoutHints = {
    colSpan?: number;
    order?: number;
    hidden?: boolean;
    readonly?: boolean;
    emphasis?: 'normal' | 'prominent' | 'subtle';
};
----

Field layout and positioning hints.

=== I18nConfig

[source,typescript]
----
type I18nConfig = {
    labelKey?: string;
    descriptionKey?: string;
    placeholderKey?: string;
    helpTextKey?: string;
    errorMessageKey?: string;
    namespace?: string;
};
----

Internationalization key configuration.

== Result Strategy Types

=== ResultStrategy

[source,typescript]
----
type ResultStrategy =
    | {
        type: 'simulate';
        label?: string;
        format?: 'address' | 'link' | 'hex' | 'number';
        abiPath?: string;
        inlineAbi?: any[];
    }
    | {
        type: 'event';
        label?: string;
        format?: 'address' | 'link' | 'hex' | 'number';
        hook?: { name: string; argsFrom?: ArgSource[] };
        name?: string;
        arg?: string | number;
        contractAddress?: string;
        abiPath?: string;
        inlineAbi?: any[];
    }
    | {
        type: 'read';
        label?: string;
        format?: 'address' | 'link' | 'hex' | 'number';
        hook?: { name: string; argsFrom?: ArgSource[] };
        function?: string;
        argsFrom?: ArgSource[];
        valueField?: string;
        abiPath?: string;
        inlineAbi?: any[];
    };
----

Strategy for extracting transaction results.

== Utility Types

=== TokenGetters

[source,typescript]
----
type TokenGetters = Record<string, () => any[]>;
----

Map of getter functions for token data.

== Type Guards

=== Argument Type Check

[source,typescript]
----
function isGroupedArguments(
    args: ContractListArgument[] | ArgumentGroup[] | undefined
): args is ArgumentGroup[];
----

Check if arguments use the grouped structure.

== Usage Examples

=== Importing Types

[source,typescript]
----
import type {
    ContractListFactory,
    ContractListArgument,
    ContractListArgUI,
    TokenGetters,
    WizardConfig,
    PreviewConfig,
} from '@daosys/wagmi-declare';
----

=== Type-Safe Factory Handling

[source,typescript]
----
import type { ContractListFactory } from '@daosys/wagmi-declare';
import { getFactories, getFactoryFunctions } from '@daosys/wagmi-declare';

function processFactory(factory: ContractListFactory) {
    const functions = getFactoryFunctions(factory);

    for (const fn of functions) {
        console.log(`Function: ${fn.functionName}`);
        console.log(`Label: ${fn.label}`);

        for (const arg of fn.args) {
            console.log(`  - ${arg.name}: ${arg.type}`);
        }
    }
}
----

=== Typed UI Configuration

[source,typescript]
----
import type { ContractListArgUI, TokenAmountConfig } from '@daosys/wagmi-declare';

const tokenAmountUI: ContractListArgUI = {
    widget: 'tokenAmount',
    tokenAmountConfig: {
        tokenFrom: 'selectedToken',
        showMaxButton: true,
        showBalance: true,
        showUsdValue: true,
    } satisfies TokenAmountConfig,
    layout: {
        colSpan: 12,
        emphasis: 'prominent',
    },
};
----
